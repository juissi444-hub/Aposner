@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  /* Smooth scrolling for the entire document */
  html {
    scroll-behavior: smooth;
    /* Hardware acceleration for better rendering performance */
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  /* Use web font Noto Sans SC as primary for reliable CJK character support */
  body {
    font-family: "Noto Sans SC", "Microsoft YaHei", "微软雅黑", "PingFang SC", "Hiragino Sans GB", "STHeiti", "WenQuanYi Micro Hei", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
    /* Enable smooth scrolling on iOS */
    -webkit-overflow-scrolling: touch;
    /* Prevent scroll jank by promoting to its own layer */
    transform: translateZ(0);
    /* Improve scrolling performance */
    overflow-y: scroll;
    overflow-x: hidden;
  }

  * {
    font-family: inherit;
    /* Smooth box rendering */
    -webkit-tap-highlight-color: transparent;
  }

  /* Force font for all text including large game text */
  span, div, p, h1, h2, h3, h4, h5, h6 {
    font-family: inherit !important;
  }

  /* Optimize scrollable containers */
  .overflow-y-auto, .overflow-y-scroll {
    -webkit-overflow-scrolling: touch;
    scroll-behavior: smooth;
    /* Use GPU acceleration for scrolling */
    transform: translateZ(0);
    will-change: scroll-position;
  }

  /* Smooth transitions without causing repaints */
  .transition-colors {
    will-change: background-color, color;
  }

  /* Optimize fixed position elements */
  .fixed {
    transform: translateZ(0);
    backface-visibility: hidden;
  }

  /* Optimize main container for smooth scrolling */
  .min-h-screen {
    /* Use GPU acceleration */
    transform: translate3d(0, 0, 0);
    /* Prevent text selection jank */
    -webkit-user-select: none;
    -moz-user-select: none;
    user-select: text;
  }

  /* Optimize all buttons and interactive elements */
  button, a, label {
    /* Use GPU for hover/active states */
    transform: translate3d(0, 0, 0);
    /* Prevent layout shifts */
    backface-visibility: hidden;
    -webkit-backface-visibility: hidden;
  }

  /* Optimize modals and overlays */
  [class*="bg-opacity"], [class*="bg-black"] {
    /* Use GPU for opacity transitions */
    transform: translateZ(0);
    will-change: opacity;
  }
}

/* Additional performance optimizations outside of base layer */
@layer utilities {
  /* Custom utility for hardware-accelerated elements */
  .gpu-accelerate {
    transform: translateZ(0);
    backface-visibility: hidden;
    perspective: 1000px;
  }

  /* Smooth scroll container utility */
  .smooth-scroll {
    scroll-behavior: smooth;
    -webkit-overflow-scrolling: touch;
  }
}
